{"version":3,"sources":["webpack:///webpack/bootstrap fc9456c28b2f1701d1a5","webpack:///external \"mongoose\"","webpack:///./~/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///./server/utils/formatTime.js","webpack:///./server/app/models/activity.js","webpack:///external \"uuid\"","webpack:///./nuxt.config.js","webpack:///./server/router/routes.js","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-cors\"","webpack:///external \"koa-logger\"","webpack:///external \"koa-session\"","webpack:///external \"nuxt\"","webpack:///./server/app/controllers/activity.js","webpack:///./server/app/controllers/article.js","webpack:///./server/app/controllers/babel.js","webpack:///./server/app/controllers/user.js","webpack:///./server/app/models/article.js","webpack:///./server/app/models/babel.js","webpack:///./server/app/models/user.js","webpack:///external \"koa-router\"","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js"],"names":["formatNumber","n","toString","formatTime","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","map","join","Schema","mongoose","ObjectId","Types","ActivitySchema","log","article_id","String","article_title","operationType","createAt","type","Date","default","now","logLen","Number","pre","next","isNew","console","length","model","module","exports","head","title","meta","charset","name","content","hid","link","rel","href","css","loading","color","router","prefix","post","Article","add","get","list","update","delete","findOne","updateTitle","updateDesc","Babel","Activity","all","oneDay","User","register","login","ctx","count","request","body","skipNum","sort","ActivityMod","find","skip","parseInt","limit","data","message","query","key","uuid","v4","description","babel","split","article","save","activity","_id","push","newActivity","ArticleMod","remove","$set","newBabel","BabelMod","allBabel","username","password","user","UserMod","cookies","set","path","httpOnly","sameSite","maxAge","expires","ArticleSchema","comment","updateAt","BabelSchema","num","UserSchema","app","host","process","env","HOST","port","PORT","config","require","dev","nuxt","builder","build","catch","error","e","exit","use","status","Promise","resolve","reject","res","on","render","req","promise","then","connect","connection","Router","cors","logger","session","bodyParser","routes","allowedMethods","listen"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fc9456c28b2f1701d1a5","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","function formatNumber(n) {\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\nconst formatTime = function (date) {\r\n  var year = date.getFullYear()\r\n  var month = date.getMonth() + 1\r\n  var day = date.getDate()\r\n\r\n  var hour = date.getHours()\r\n  var minute = date.getMinutes()\r\n  var second = date.getSeconds();\r\n\r\n  return [year, month, day].map(formatNumber).join('-')\r\n}\r\n\r\nexport default formatTime\n\n\n// WEBPACK FOOTER //\n// ./server/utils/formatTime.js","import mongoose from 'mongoose'\r\nimport formatTime from '../../utils/formatTime'\r\n\r\nconst Schema = mongoose.Schema\r\nconst ObjectId = Schema.Types.ObjectId\r\n\r\nconst ActivitySchema = new Schema({\r\n    log:[{\r\n        article_id: String,\r\n        article_title: String,\r\n        operationType: String,\r\n        createAt: {\r\n            type: Date,\r\n            default: Date.now()\r\n        }\r\n    }],\r\n    date: String,\r\n    logLen: {\r\n        type: Number,\r\n        default: 0\r\n    }\r\n})\r\n\r\nActivitySchema.pre('save', function(next) {\r\n    if (this.isNew) {\r\n        this.date = formatTime(new Date()) \r\n    }\r\n    console.log(\"logLen:\",this.log.length)\r\n    this.logLen = this.log.length || 0\r\n\r\n    next()\r\n})\r\n\r\nexport default mongoose.model('Activity', ActivitySchema)\n\n\n// WEBPACK FOOTER //\n// ./server/app/models/activity.js","module.exports = require(\"uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid\"\n// module id = 4\n// module chunks = 0","module.exports = {\r\n  /*\r\n  ** Headers of the page\r\n  */\r\n  head: {\r\n    title: 'starter',\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\r\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\r\n    ],\r\n    link: [\r\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\r\n    ]\r\n  },\r\n  /*\r\n  ** Global CSS\r\n  */\r\n  css: ['./static/less/index.less'],\r\n  /*\r\n  ** Customize the progress-bar color\r\n  */\r\n  loading: { color: '#3B8070' }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import Router from 'koa-router'\r\nimport Article from '../app/controllers/article'\r\nimport Babel from '../app/controllers/babel'\r\nimport Activity from '../app/controllers/activity'\r\nimport User from '../app/controllers/user'\r\n\r\nexport default () => {\r\n\tconst router = new Router({ prefix: '/api' })\r\n\r\n    // article\r\n\trouter.post('/article/save', Article.add)\r\n    router.get('/article/list', Article.list)\r\n    router.post('/article/update', Article.update)\r\n    router.post('/article/delete', Article.delete)\r\n    router.get('/article/read', Article.findOne)\r\n    router.post('/article/update/title', Article.updateTitle)\r\n    router.post('/article/update/desc', Article.updateDesc)\r\n\r\n    // babel\r\n    router.get('/babel/list', Babel.list)\r\n    router.post('/babel/add', Babel.add)\r\n    router.post('/babel/delete', Babel.delete)\r\n\r\n    // activity\r\n    router.get('/activity/all', Activity.all)\r\n    router.get('/activity/oneday', Activity.oneDay)\r\n\r\n    // user\r\n    router.post('/user/register', User.register)\r\n    router.post('/user/login', User.login)\r\n\r\n\treturn router\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/routes.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-cors\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"koa-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-logger\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 12\n// module chunks = 0","import mongoose from 'mongoose'\r\nimport ActivityMod from '../models/activity.js'\r\n\r\nclass Activity {\r\n    constructor() {}\r\n\r\n    async all(ctx) {\r\n    \tconst count = ctx.request.body.count || 10\r\n        const skipNum = ctx.request.body.skipNum || 0\r\n        const sort = ctx.request.body.sort || -1\r\n\r\n        const data = await ActivityMod.find({},'date logLen').sort({'date': sort})\r\n        .skip(parseInt(skipNum)).limit(parseInt(count))\r\n\r\n        ctx.body = {\r\n            message: 'success',\r\n            data: data\r\n        }\r\n    }\r\n    // 一天的操作记录\r\n    async oneDay(ctx) {\r\n    \tconst date = ctx.request.query.date\r\n    \tconst sort = ctx.request.query.sort || -1\r\n\r\n    \tconst data = await ActivityMod.find({date: date}).sort({'date': sort})\r\n    }\r\n}\r\n\r\nexport default new Activity()\n\n\n// WEBPACK FOOTER //\n// ./server/app/controllers/activity.js","import mongoose from 'mongoose'\r\nimport ArticleMod from '../models/article'\r\nimport ActivityMod from '../models/activity'\r\nimport uuid from 'uuid'\r\nimport formatTime from '../../utils/formatTime'\r\n\r\nclass Article {\r\n    constructor() {}\r\n\r\n    async add(ctx) {\r\n        const key = uuid.v4()\r\n        const title = ctx.request.body.title\r\n        const content = ctx.request.body.content\r\n        const description = ctx.request.body.description\r\n        const babel  = ctx.request.body.babel.split(',')\r\n        let article\r\n\r\n        try {\r\n            article = new ArticleMod({\r\n                title: title,\r\n                content: content,\r\n                babel: babel,\r\n                description: description\r\n            })\r\n            article = await article.save()\r\n\r\n            const date = formatTime(new Date())\r\n            let activity = await ActivityMod.findOne({date: date})\r\n\r\n            if (activity) {\r\n                const log = {\r\n                    article_id: article._id,\r\n                    article_title: article.title,\r\n                    operationType: 'created'\r\n                }\r\n\r\n                activity.log.push(log)\r\n                await activity.save()\r\n            }else {\r\n                let newActivity = new ActivityMod({\r\n                    log: [{\r\n                        article_id: article._id,\r\n                        article_title: article.title,\r\n                        operationType: 'created'\r\n                    }]\r\n                })\r\n                await newActivity.save()\r\n            }\r\n\r\n        }catch(e) {\r\n            ctx.body = {\r\n                message: '保存失败',\r\n            }\r\n        }\r\n\r\n        ctx.body = {\r\n            message: '保存成功',\r\n            data: article\r\n        }\r\n    }\r\n\r\n    async list(ctx) {\r\n        const count = ctx.request.query.count || 10\r\n        const skipNum = ctx.request.query.skipNum || 0\r\n        const sort = ctx.request.query.sort || -1\r\n\r\n        const data = await ArticleMod.find({},['title', 'description', 'babel', 'meta', 'comment']).sort({'meta.updateAt': sort}).skip(parseInt(skipNum)).limit(parseInt(count))\r\n\r\n        ctx.body = {\r\n            message: 'success',\r\n            data: data\r\n        }\r\n    }\r\n\r\n    async update(ctx) {\r\n        const body = ctx.request.body\r\n        const content = body.content\r\n        const description = body.description\r\n        const title = body.title\r\n        const _id  = body._id\r\n\r\n        let article = await ArticleMod.findOne({_id:_id})\r\n        if(title && content && description) {\r\n          article.title = title\r\n          article.content = content\r\n          article.description = description\r\n          await article.save()\r\n        }\r\n        // title && await ArticleMod.update({_id: _id},{$set: {title: title}})\r\n        // content && await ArticleMod.update({_id: _id},{$set: {content: content}})\r\n        // description && await ArticleMod.update({_id: _id},{$set: {description: description}})\r\n\r\n        // 保存操作日志\r\n\r\n        // let article\r\n        try {\r\n            // article = await ArticleMod.findOne({_id: _id})\r\n            const date = formatTime(new Date())\r\n            let activity = await ActivityMod.findOne({date: date})\r\n            // console.log(activity)\r\n\r\n            if (activity) {\r\n                console.log(\"当天有日志\")\r\n                const log = {\r\n                    article_id: article._id,\r\n                    article_title: article.title,\r\n                    operationType: 'updated'\r\n                }\r\n                activity.log.push(log)\r\n                await activity.save()\r\n            }else {\r\n                console.log(\"当天没有日志\")\r\n                const newActivity = new ActivityMod({\r\n                    log:[{\r\n                        article_id: article._id,\r\n                        article_title: article.title,\r\n                        operationType: 'updated'\r\n                    }]\r\n                })\r\n                await newActivity.save()\r\n            }\r\n\r\n        }catch(e) {\r\n            ctx.body = {\r\n                message: '更新失败',\r\n            }\r\n        }\r\n\r\n        ctx.body = {\r\n            message: '保存成功',\r\n            data: article\r\n        }\r\n    }\r\n\r\n    async delete(ctx) {\r\n        const _id = ctx.request.body._id\r\n        try {\r\n            // 保存日志\r\n            const article = await ArticleMod.findOne({_id: _id})\r\n            const date = formatTime(new Date())\r\n            let activity = await ActivityMod.findOne({date: date})\r\n\r\n            if (activity) {\r\n                const log = {\r\n                    article_id: article._id,\r\n                    article_title: article.title,\r\n                    operationType: 'deleted'\r\n                }\r\n                activity.log.push(log)\r\n                await activity.save()\r\n            }else {\r\n                const newActivity = new ActivityMod({\r\n                    article_id: article._id,\r\n                    article_title: article.title,\r\n                    operationType: 'deleted'\r\n                })\r\n                await newActivity.save()\r\n            }\r\n            // 删除文章\r\n            await ArticleMod.remove({_id: _id})\r\n        }catch(e) {\r\n            ctx.body = {\r\n                message: 'failed'\r\n            }\r\n        }\r\n\r\n        ctx.body = {\r\n            message: 'success'\r\n        }\r\n    }\r\n\r\n    async findOne(ctx) {\r\n        const _id = ctx.request.query._id\r\n\r\n        if (_id) {\r\n            const data = await ArticleMod.findOne({_id:_id})\r\n\r\n            ctx.body = {\r\n                message: 'success',\r\n                data: data\r\n            }\r\n        }\r\n    }\r\n\r\n    async updateTitle(ctx) {\r\n        const body = ctx.request.body\r\n        const title = body.title || '[无标题]'\r\n        const _id  = body._id\r\n\r\n        title && await ArticleMod.update({_id: _id},{$set: {title: title}})\r\n\r\n        ctx.body = {\r\n            message: 'success'\r\n        }\r\n    }\r\n\r\n    async updateDesc(ctx) {\r\n        const body = ctx.request.body\r\n        const description = body.description\r\n        const _id  = body._id\r\n\r\n        description && await ArticleMod.update({_id: _id},{$set: {description: description}})\r\n\r\n        ctx.body = {\r\n            message: 'success'\r\n        }\r\n    }\r\n}\r\n\r\nexport default new Article()\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/app/controllers/article.js","import mongoose from 'mongoose'\r\n\r\nimport BabelMod from '../models/babel'\r\n\r\nclass Babel {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    async add( ctx ) {\r\n        const newBabel = ctx.request.body.babel\r\n        let babel = await BabelMod.find({babel:newBabel})\r\n        console.log(babel.length)\r\n        if (!babel.length) {\r\n            new BabelMod({babel:newBabel}).save()\r\n            // const allBabel = await BabelMod().find({})\r\n            ctx.body = {\r\n                message: 'success',\r\n                // data: allBabel\r\n            }\r\n        }else {\r\n            ctx.body = {\r\n                message: 'babel已存在',\r\n            }\r\n        }\r\n    }\r\n\r\n    async delete(ctx) {\r\n        const _id = ctx.request.body._id\r\n\r\n        try {\r\n            await BabelMod.remove({_id:_id})\r\n        }catch(e){\r\n            ctx.body = {\r\n                message: 'fail',\r\n                data: e\r\n            }\r\n        }\r\n        \r\n        ctx.body = {\r\n            message: 'success'\r\n        }\r\n    }\r\n\r\n    async list(ctx) {\r\n        let allBabel\r\n        try{\r\n            allBabel = await BabelMod.find({})\r\n        }catch(e) {\r\n            ctx.body = {\r\n                message: 'fail',\r\n                data: e\r\n            }\r\n        }\r\n\r\n        ctx.body = {\r\n            message: 'success',\r\n            data: allBabel\r\n        }\r\n    }\r\n}\r\n\r\nexport default new Babel()\n\n\n// WEBPACK FOOTER //\n// ./server/app/controllers/babel.js","import mongoose from 'mongoose'\r\nimport UserMod from '../models/user'\r\nimport uuid from 'uuid'\r\n\r\nclass User {\r\n    constructor() {}\r\n\r\n    async register(ctx) {\r\n        const username = ctx.request.body.username\r\n        const password = ctx.request.body.password\r\n\r\n        let user = new UserMod({\r\n            username: username,\r\n            password: password,\r\n        })\r\n\r\n        user.save()\r\n\r\n        ctx.body= {\r\n            message: 'success',\r\n            username: username\r\n        }\r\n    }\r\n\r\n    async login(ctx) {\r\n        const username = ctx.request.body.username\r\n        const password = ctx.request.body.password\r\n\r\n        let user = await UserMod.findOne({username: username, password: password})\r\n        console.log(user)\r\n        if (user) {\r\n            ctx.cookies.set('userId', \"2222222\", {\r\n                path: '/#/login',\r\n                httpOnly: false,\r\n                sameSite: 'strict',\r\n                maxAge: 10 * 60 * 1000, // cookie有效时长\r\n                expires: new Date('2017-11-15')\r\n            });\r\n\r\n            console.log(ctx.cookies.get('userId')) \r\n\r\n            ctx.body={\r\n                message: 'success',\r\n            }\r\n        }else {\r\n            ctx.body = {\r\n                message: 'fail'\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default new User()\n\n\n// WEBPACK FOOTER //\n// ./server/app/controllers/user.js","import mongoose from 'mongoose'\r\nimport formatTime from '../../utils/formatTime'\r\n\r\nconst Schema = mongoose.Schema\r\nconst ObjectId = Schema.Types.ObjectId\r\n\r\nconst ArticleSchema = new Schema({\r\n    title: String,\r\n    babel: [String],\r\n    content: String,\r\n    comment: String,\r\n    description: String,\r\n    meta: {\r\n      createAt: String,\r\n      updateAt: {\r\n        type: Date,\r\n        default: Date.now()\r\n      }\r\n    }\r\n})\r\n\r\nArticleSchema.pre('save', function(next) {\r\n  if (this.isNew) {\r\n    this.meta.createAt = formatTime(new Date())\r\n    console.log(\"创建时间\",this.meta.createAt)\r\n  }else {\r\n    this.meta.updateAt = new Date()\r\n  }\r\n\r\n  next()\r\n})\r\n\r\nexport default mongoose.model('Article', ArticleSchema)\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/app/models/article.js","import mongoose from 'mongoose'\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst BabelSchema = new Schema({\r\n    babel: String,\r\n    num: {\r\n    \tdefault: 0,\r\n    \ttype: Number\r\n    },\r\n    \r\n\r\n})\r\n\r\nexport default mongoose.model('Babel', BabelSchema)\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/app/models/babel.js","import mongoose from 'mongoose'\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n    username: String,\r\n    password: String,\r\n})\r\n\r\nexport default mongoose.model('User', UserSchema)\n\n\n// WEBPACK FOOTER //\n// ./server/app/models/user.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 21\n// module chunks = 0","import Koa from 'koa'\r\nimport { Nuxt, Builder } from 'nuxt'\r\nimport Router from './router/routes'\r\nimport mongoose from 'mongoose'\r\nimport logger from 'koa-logger'\r\nimport session from 'koa-session'\r\nimport bodyParser from 'koa-bodyparser'\r\nimport cors from 'koa-cors'\r\n// import config from './config'\r\n\r\nconst app = new Koa()\r\nconst host = process.env.HOST || '127.0.0.1'\r\nconst port = process.env.PORT || 3000\r\n\r\n// Import and Set Nuxt.js options\r\nlet config = require('../nuxt.config.js')\r\nconfig.dev = !(app.env === 'production')\r\n\r\n// Instantiate nuxt.js\r\nconst nuxt = new Nuxt(config)\r\n\r\n// Build in development\r\nif (config.dev) {\r\n  const builder = new Builder(nuxt)\r\n  builder.build().catch(e => {\r\n    console.error(e) // eslint-disable-line no-console\r\n    process.exit(1)\r\n  })\r\n}\r\n\r\napp.use(ctx => {\r\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\r\n\r\n  return new Promise((resolve, reject) => {\r\n    ctx.res.on('close', resolve)\r\n    ctx.res.on('finish', resolve)\r\n    nuxt.render(ctx.req, ctx.res, promise => {\r\n      // nuxt.render passes a rejected promise into callback on error.\r\n      promise.then(resolve).catch(reject)\r\n    })\r\n  })\r\n})\r\n\r\nmongoose.connect('mongodb://blog_runner:dj15155620677@59.110.164.55:27017/blog')\r\nmongoose.connection.on(\"connected\",() => {\r\n    console.log('连接数据库成功')\r\n})\r\n\r\nconst router = Router()\r\n\r\napp.use(cors({\"Access-Control-Allow-Credentials\": true}))\r\napp.use(logger())\r\napp.use(session(app))\r\napp.use(bodyParser())\r\napp.use(router.routes())\r\napp.use(router.allowedMethods())\r\n\r\napp.listen(port, host)\r\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}